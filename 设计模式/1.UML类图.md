# UML类图

统一建模语言（Unified Modeling Language，UML）是用来设计软件的可视化建模语言。它的特点是简单、统一、图形化、能表达软件设计中的动态与静态信息。

UML 从目标系统的不同角度出发，定义了用例图、**`类图`**、对象图、状态图、活动图、时序图、协作图、构件图、部署图等 9 种图。



## 1.类图概述

类图(Class diagram)是显示了模型的静态结构，特别是模型中存在的类、类的内部结构以及它们与其他类的关系等。类图不显示暂时性的信息。类图是面向对象建模的主要组成部分。

> 作用

* 在软件工程中，类图是一种静态的结构图，描述了系统的类的集合，类的属性和类之间的关系，可以简化了人们对系统的理解；
* 类图是系统分析和设计阶段的重要产物，是系统编码和测试的重要模型。



## 2.类图的表示

### 2.1 类的表示方式

在UML类图中，类使用包含类名、属性(field) 和方法(method) 且带有分割线的矩形来表示

比如下图表示一个Employee类，它包含name,age和address这3个属性，以及work()方法。 

![Employee](img.asstes\Employee.jpg)

属性/方法名称前加的加号和减号表示了这个属性/方法的可见性，UML类图中表示可见性的符号有三种：

* +：表示public
* -：表示private
* #：表示protected
* _: 下划线表示static
* 斜体表示抽象

属性的完整表示方式是： **`可见性  名称 ：类型 [ = 缺省值]`**  

方法的完整表示方式是： **`可见性  名称(参数列表) [ ： 返回类型]`**

>1，中括号中的内容表示是可选的
>
>2，也有将类型放在变量名前面，返回值类型放在方法名前面



### 2.2 接口表示方式

![image-20230424220119049](img.asstes\image-20230424220119049.png)

一个接口图与类图的区别主要是顶端有个**`《interface》`**标识。

- 第一行：接口名称
- 第二行：接口方法



### 2.3 包表示方式

![image-20230425093321036](img.asstes\image-20230425093321036.png)



## 3.类和类之间的关系

### 3.1 关联关系

关联关系是对象之间的一种引用关系，用于表示一类对象与另一类对象之间的联系。关联关系是类与类之间最常用的一种关系，分为一般关联关系、聚合关系和组合关系。

- 关联关系：指的是`类与类之间的联接`，**`它使一个类知道另一个类的属性和方法（实例变量体现）`**。A类依赖于B对象,并且`把B作为A的一个成员变量`, 则A和B存在关联关系.
- **关联可以是双向的，也可以是单向的**。两个类之前是一个层次的，不存在部分跟整体之间的关系。
- 在UML类图中，关联通常使用`实线箭头`表示

![在这里插入图片描述](img.asstes\2020022411311616.png)

#### 3.1.1 单向关联

在UML类图中单向关联用一个带箭头的实线表示。下图表示每个顾客都有一个地址，这通过让Customer类持有一个类型为Address的成员变量类实现。

![customer_address](img.asstes\customer_address.png)



#### 3.1.2 双向关联

双向关联就是双方各自持有对方类型的成员变量。

在UML类图中，双向关联用一个不带箭头的直线表示。下图中在Customer类中维护一个List\<Product>，表示一个顾客可以购买多个商品；在Product类中维护一个Customer类型的成员变量表示这个产品被哪个顾客所购买。

![customer_product](img.asstes\customer_product.png)



#### 3.1.3 自关联

自关联在UML类图中用一个带有箭头且指向自身的线表示。下图的意思就是Node类包含类型为Node的成员变量，也就是“自己包含自己”。

![node](img.asstes\node.png)

### 3.2 聚合关系

- 聚合关系是`关联关系的一种特例`，他体现的是`整体与部分`，是一种`“弱拥有”`的关系，即`has-a`的关系。聚合是`整体`和`个体`之间的关系。例如，汽车类与引擎类、轮胎类，以及其它的零件类之间的关系便整体和个体的关系。
- 与关联关系一样，**`聚合关系`** 也是通过`实例变量`实现的。**`但是关联关系所涉及的两个类是处在同一层次上的，而在聚合关系中，两个类是处在不平等层次上的，一个代表整体，另一个代表部分。`**
- 聚合关系表示整体和个体的关系，整体和个体可以相互独立存在，一定是有两个模块分别管理整体和个体。
- 在UML类图中，聚合通常使用`空心菱形+实线箭头`表示

![在这里插入图片描述](img.asstes\2020022412311785.png)

聚合关系也是通过成员对象来实现的，其中成员对象是整体对象的一部分，但是成员对象可以脱离整体对象而独立存在。例如，学校与老师的关系，学校包含老师，但如果学校停办了，老师依然存在。

在 UML 类图中，聚合关系可以用带空心菱形的实线来表示，菱形指向整体。下图所示是大学和教师的关系图：

![image-20191229173422328](img.asstes\image-20191229173422328.png)



### 3.3 组合关系

- 组合关系是`关联关系的一种特例`，他体现的是一种`contains-a`(包含)的关系，这种关系比聚合更强，也称为`强聚合`。
- 它要求普通的聚合关系中代表整体的对象负责代表部分对象的生命周期，组合关系是不能共享的。代表整体的对象需要负责保持部分对象和存活，在一些情况下将负责代表部分的对象湮灭掉。代表整体的对象可以将代表部分的对象传递给另一个对象，由后者负责此对象的生命周期。换言之，代表部分的对象在每一个时刻只能与一个对象发生组合关系，由后者排他地负责生命周期。部分和整体的生命周期一样。
- **`整体和个体不能独立存在，一定是在一个模块中同时管理整体和个体，生命周期必须相同(级联)。`**
- 在UML类图中，组合通常使用`实心菱形+实线箭头`表示

![在这里插入图片描述](img.asstes\20200224123131234.png)

在组合关系中，整体对象可以控制部分对象的生命周期，一旦整体对象不存在，部分对象也将不存在，部分对象不能脱离整体对象而存在。例如，头和嘴的关系，没有了头，嘴也就不存在了。

![image-20191229173455149](img.asstes\image-20191229173455149.png)



### 3.4 依赖关系

- 依赖关系：指的是类与类之间的联接。依赖关系表示`一个类依赖于另一个类的定义`。一般而言，依赖关系在Java语言中体现为`成员变量、局域变量、方法的形参、方法返回值`，或者对**静态方法的调用。**
- 表示一个A类依赖于B类的定义,如果A对象离开B对象,A对象就不能正常编译,则A对象依赖于B对象(A类中使用到了B对象)；**比如某人要过河，需要借用一条船，此时人与船之间的关系就是依赖；** 表现在代码层面，类B作为参数被类A在某个method方法中使用。
- 在UML类图中，依赖通常使用`虚线箭头`表示

![在这里插入图片描述](img.asstes\20200224105438325.png)

依赖关系是一种**`使用关系`**，它是对象之间耦合度最弱的一种关联方式，是临时性的关联。在代码中，某个类的方法通过局部变量、方法的参数或者对静态方法的调用来访问另一个类（被依赖类）中的某些方法来完成一些职责。

在 UML 类图中，依赖关系使用带箭头的虚线来表示，箭头从使用类指向被依赖的类。下图所示是司机和汽车的关系图，司机驾驶汽车：

![image-20191229173518926](img.asstes\image-20191229173518926.png)

### 3.5 继承关系(泛化关系)

- 泛化关系其实就是`继承关系`：指的是一个类（称为子类、子接口）继承(`extends`)另外的一个类（称为父类、父接口）的功能，并可以增加自己额外的一些功能，**继承是类与类或者接口与接口之间最常见的关系；**
- 在Java中此类关系通过关键字 `extends`明确标识。
- 在UML类图中，继承通常使用 **`空心三角+实线`** 表示

![在这里插入图片描述](img.asstes\20200224104304237.png)



![image-20191229173539838](img.asstes\image-20191229173539838.png)



### 3.6 实现关系

- 实现关系：指的是一个class类实现 interface接口（可以实现多个接口）的功能；实现是类与接口之间最常见的关系；
- 在Java中此关系通过关键字`implements`明确标识。
- 在UML类图中，实现通常使用`空心三角+虚线`表示

![在这里插入图片描述](img.asstes\20200224104937159.png)

![image-20191229173554296](img.asstes\image-20191229173554296.png)



## 4.总结

| 功能     | 图示 | 描述                | 举例                                    |
| -------- | ---- | ------------------- | --------------------------------------- |
| 继承关系 | -▷   | 实线 + 空心三角形   | 鸟 —▷ 动物；鸟继承动物                  |
| 实现接口 | ---▷ | 虚线 + 空心三角形   | 大雁 ---▷ 飞翔；大雁实现了飞翔接口      |
| 实现接口 | —○   | 棒棒糖表示法        | 唐老鸭 —○ 讲人话；唐老鸭实现讲人话接口  |
| 关联关系 | —>   | 实线剪头            | 企鹅 —> 气候；企鹅需要‘知道’气候的变化  |
| 依赖关系 | ---> | 虚线剪头            | 动物 ---> 氧气；动物依赖于氧气          |
| 聚合关系 | ◇—>  | 空心菱形 + 实线剪头 | 大雁 ◇—> 翅膀；部分和整体的关系         |
| 组合关系 | ◆—>  | 实心菱形 + 实线剪头 | 大雁 ◆—> 雁群；A包含B，但B不是A的一部分 |